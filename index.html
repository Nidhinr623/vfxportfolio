<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>NIDHIN R | VFX COMPOSITOR</title>

  <!-- Google Fonts with optimized loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Jersey+25&display=block" rel="stylesheet"/>

  <link rel="stylesheet" href="styles.css"/>
  
  <script>
    // Hide text until font loads to prevent flash with smooth fade-in
    const style = document.createElement('style');
    style.textContent = `
      body { 
        opacity: 0; 
        transition: opacity 0.6s ease-in-out;
      }
      body.loaded { 
        opacity: 1; 
      }
    `;
    document.head.appendChild(style);
    
    if ('fonts' in document) {
      Promise.race([
        document.fonts.ready,
        new Promise(resolve => setTimeout(resolve, 3000))
      ]).then(() => {
        document.body.classList.add('loaded');
        document.documentElement.classList.add('fonts-loaded');
      });
    } else {
      setTimeout(() => {
        document.body.classList.add('loaded');
      }, 100);
    }
  </script>
</head>
<body>
  <!-- NAV -->
  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="#showreel">Showreel</a></li>
      <li><a href="#portfolio">Portfolio</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="about.html">About Me</a></li>
    </ul>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-content">
      <p class="hero-subtitle">
        Visual Effects Artist, Specialized in Photoreal Compositing Techniques<br>
        "Bringing Imagination to Life"
      </p>
    </div>
  </header>

  <!-- NAME BANNER -->
  <section class="title-section" aria-label="Name and Role">
    <h1 class="main-title">NIDHIN R | VFX COMPOSITOR</h1>
  </section>

  <!-- SHOWREEL (click to play) -->
  <section id="showreel" class="showreel-section section-pad">
    <div class="section-header">
      <h2 class="section-title">Showreel</h2>
      <img src="assets/arrow_1.png" alt="" class="down-arrow-icon" aria-hidden="true">
    </div>

    <div class="showreel-frame" data-video="https://player.vimeo.com/video/1134890245?title=0&byline=0&portrait=0&autoplay=1" role="button" aria-label="Play showreel">
      <img src="assets/Showreel2.png" alt="Compositing Showreel" class="card-media" />
    </div>
  </section>

  <!-- PORTFOLIO -->
  <section id="portfolio" class="portfolio-section section-pad">
    <div class="section-header">
      <h2 class="section-title">Portfolio</h2>
      <img src="assets/arrow_1.png" alt="" class="down-arrow-icon" aria-hidden="true">
    </div>

    <div class="portfolio-grid">
      <!-- YouTube -->
      <article class="card" data-video="https://www.youtube.com/embed/YT_ID_BATTLEGROUNDS" role="button" aria-label="Play BATTLEGROUNDS">
        <img class="card-media" src="assets/Battlegrounds.png" alt="Battlegrounds"/>
        <div class="card-info">
          <h3 class="card-title">BATTLEGROUNDS</h3>
          <p class="card-sub">Teaser</p>
          <a href="#" class="card-link">View Breakdown</a>
        </div>
      </article>

      <!-- ECHOES FROM PAST -->
      <article class="card" data-video="https://www.youtube.com/embed/giqXPNuWmdw?si=RTaZAYrI_YN_I4g-" role="button" aria-label="Play ECHOES FROM PAST">
        <img class="card-media" src="assets/Echosfrompast.png" alt="Echoes From Past"/>
        <div class="card-info">
          <h3 class="card-title">ECHOES FROM PAST</h3>
          <p class="card-sub">Short Film</p>
          <a class="card-sub" aria-hidden="true">&nbsp;</a>
        </div>
      </article>

      <!-- TRAFFIC ANIMATION -->
      <article class="card" data-video="https://player.vimeo.com/video/1134609678?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479" role="button" aria-label="Play TRAFFIC ANIMATION">
        <img class="card-media" src="assets/Traffic.png" alt="Traffic Animation"/>
        <div class="card-info">
          <h3 class="card-title">TRAFFIC ANIMATION</h3>
          <p class="card-sub">Animation</p>
          <a href="#" class="card-link">View Breakdown</a>
        </div>
      </article>

      <!-- CRY FOR THE MOON -->
      <article class="card" data-video="https://player.vimeo.com/video/1134609590?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479" role="button" aria-label="Play CRY FOR THE MOON">
        <img class="card-media" src="assets/CFTM.png" alt="Cry For The Moon"/>
        <div class="card-info">
          <h3 class="card-title">CRY FOR THE MOON</h3>
          <p class="card-sub">Short Film</p>
          <a href="#" class="card-link">View Breakdown</a>
        </div>
      </article>

      <!-- NUKE PROJECT -->
      <article class="card" data-video="https://player.vimeo.com/video/1134609837?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479" role="button" aria-label="Play NUKE PROJECT">
        <img class="card-media" src="assets/boyshots.png" alt="Nuke project"/>
        <div class="card-info">
          <h3 class="card-title">NUKE PROJECT</h3>
          <p class="card-sub">Nuke Compositing Work</p>
          <a href="#" class="card-link">View Breakdown</a>
        </div>
      </article>

      <!-- MOVING MEDITATIONS -->
      <article class="card" data-video="https://player.vimeo.com/video/958393629?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479" role="button" aria-label="Play MOVING MEDITATIONS">
        <img class="card-media" src="assets/Meditations.png" alt="Moving Meditations"/>
        <div class="card-info">
          <h3 class="card-title">MOVING MEDITATIONS</h3>
          <p class="card-sub">Animation</p>
          <a href="#" class="card-link">View Breakdown</a>
        </div>
      </article>

      <!-- ALTERNATE REALITIES -->
      <article class="card" data-video="https://player.vimeo.com/video/874506357?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&app_id=58479" role="button" aria-label="Play ALTERNATE REALITIES">
        <img class="card-media" src="assets/Alternate.png" alt="Alternate Realities"/>
        <div class="card-info">
          <h3 class="card-title">ALTERNATE REALITIES</h3>
          <p class="card-sub">Animation</p>
          <a href="#" class="card-link">View Breakdown</a>
        </div>
      </article>

      <!-- SHOWREEL 2023 -->
      <article class="card" data-video="https://www.youtube.com/embed/pHyuoxWIHwU?si=Yb4AaGqcSk6lwkI9" role="button" aria-label="Play SHOWREEL 2023">
        <img class="card-media" src="assets/Showreel2023.png" alt="Showreel 2023"/>
        <div class="card-info">
          <h3 class="card-title">SHOWREEL 2023</h3>
          <p class="card-sub" aria-hidden="true">&nbsp;</p>
          <a class="card-sub" aria-hidden="true">&nbsp;</a>
        </div>
      </article>
    </div>
  </section>

  <!-- CONTACTS -->
  <section id="contact" class="contact-section">
    <div class="contact-inner">
      <div class="section-header">
        <h2 class="section-title">Contacts and socials</h2>
        <img src="assets/arrow_1.png" alt="" class="down-arrow-icon" aria-hidden="true">
      </div>

      <div class="about-container cta-inner">
        <h2 class="section-title">Let's collaborate</h2>
        <p class="about-text center">
          Open to full-time or freelance visual effects, Animation, and video editing gigs.
        </p>

        <div class="contact-buttons">
          <a id="email-link"
             class="btn-primary email-btn"
             href="#"
             data-email="nidhinr623@gmail.com"
             data-subject="subject"
             data-body="Hi Nidhin,"
             >CONNECT: EMAIL</a>

          <a class="about-btn-inline" href="about.html">ABOUT ME</a>
        </div>
      </div>

      <div class="social-links">
        <a href="https://www.instagram.com/nidhin_ravindran_309/" class="social-icon" aria-label="Instagram"><img src="assets/insta.png" alt="Instagram" /></a>
        <a href="https://youtube.com/@nidhinravindran4223?si=no9QBZ6sUfNqP90X" class="social-icon" aria-label="YouTube"><img src="assets/yt.png" alt="YouTube" /></a>
        <a href="https://www.linkedin.com/in/nidhin-r-a96884217" class="social-icon" aria-label="LinkedIn"><img src="assets/Linkdin.png" alt="LinkedIn" /></a>
        <a href="https://www.behance.net/NidhinRaveendran309" class="social-icon" aria-label="Behance"><img src="assets/behance.png" alt="Behance" /></a>
      </div>
    </div>
  </section>

  <footer class="footer">
    <p>&copy; 2025 Nidhin R. All rights reserved.</p>
  </footer>

  <div id="about" style="height:1px;"></div>

  <!-- Video Modal -->
  <div class="video-modal" hidden>
    <div class="video-modal__backdrop" data-close></div>
    <div class="video-modal__dialog" role="dialog" aria-modal="true" aria-label="Video player">
      <button class="video-modal__close" type="button" aria-label="Close" data-close>âœ•</button>
      <div class="video-modal__frame"></div>
    </div>
  </div>

  <!-- JS (HD-focused embed) -->
  <script>
    const modal = document.querySelector('.video-modal');
    const iframeContainer = modal.querySelector('.video-modal__frame');

    let vimeoApiPromise;
    function loadVimeoAPI() {
      if (window.Vimeo && window.Vimeo.Player) return Promise.resolve();
      if (!vimeoApiPromise) {
        vimeoApiPromise = new Promise((resolve) => {
          const s = document.createElement('script');
          s.src = 'https://player.vimeo.com/api/player.js';
          s.onload = resolve;
          document.head.appendChild(s);
        });
      }
      return vimeoApiPromise;
    }

    function lockScroll(lock) {
      if (lock) {
        const scrollBarComp = window.innerWidth - document.documentElement.clientWidth;
        document.body.style.overflow = 'hidden';
        document.body.style.paddingRight = scrollBarComp + 'px';
      } else {
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
      }
    }

    function openVideo(url) {
      if (!url) return;
      iframeContainer.innerHTML = '';

      let embedHTML = '';
      if (url.includes('vimeo.com')) {
        const src = url.includes('autoplay=1') ? url : `${url}${url.includes('?') ? '&' : '?'}autoplay=1`;
        embedHTML = `
          <div style="position:relative;aspect-ratio:16/9">
            <iframe
              src="${src}"
              frameborder="0"
              allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              style="position:absolute;inset:0;width:100%;height:100%;"
              allowfullscreen
            ></iframe>
          </div>
        `;
      } else if (url.includes('youtube.com') || url.includes('youtu.be')) {
        const videoId = url.split('/').pop().split('?')[0];
        embedHTML = `
          <iframe
            src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&playsinline=1&vq=hd1080"
            frameborder="0"
            allow="autoplay; fullscreen; picture-in-picture"
            style="width:100%;height:100%;"
            allowfullscreen
          ></iframe>
        `;
      }

      iframeContainer.innerHTML = embedHTML;
      modal.hidden = false;
      lockScroll(true);

      if (url.includes('vimeo.com')) {
        loadVimeoAPI().then(() => {
          const iframe = iframeContainer.querySelector('iframe');
          if (!iframe || !window.Vimeo) return;
          const player = new Vimeo.Player(iframe);
          player.getQualities()
            .then((qualities) => {
              const list = Array.isArray(qualities)
                ? qualities.map(q => (typeof q === 'string' ? q : q && q.id ? q.id : q))
                : [];
              const pref = ['4k','2k','1440p','1080p','720p','540p','360p','240p'];
              const best = pref.find(q => list.includes(q)) || list[0];
              if (best) player.setQuality(best).catch(() => {});
            })
            .catch(() => {});
        });
      }
    }

    function closeVideo() {
      iframeContainer.innerHTML = '';
      modal.hidden = true;
      lockScroll(false);
    }

    document.addEventListener('click', (e) => {
      const clickable = e.target.closest('.card-media, .showreel-frame');
      if (clickable) {
        const url = clickable.dataset.video || clickable.closest('[data-video]')?.dataset.video;
        if (url) openVideo(url);
      }
      if (e.target.matches('[data-close]')) closeVideo();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.hidden) closeVideo();
    });
  </script>

  <!-- Gmail compose redirect for all browsers -->
  <script>
    (function () {
      const link = document.getElementById('email-link');
      if (!link) return;

      function isMobile() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      }

      function buildGmailComposeUrl(email, subject, body) {
        const params = new URLSearchParams();
        if (email) params.set('to', email);
        if (subject) params.set('su', subject);
        if (body) params.set('body', body);
        return 'https://mail.google.com/mail/?view=cm&fs=1&' + params.toString();
      }

      function buildMailtoUrl(email, subject, body) {
        const params = new URLSearchParams();
        if (subject) params.set('subject', subject);
        if (body) params.set('body', body);
        const query = params.toString();
        return `mailto:${email}${query ? '?' + query : ''}`;
      }

      link.addEventListener('click', function (e) {
        e.preventDefault();
        const email = link.dataset.email || '';
        const subject = link.dataset.subject || '';
        const body = link.dataset.body || '';

        if (isMobile()) {
          // Use mailto: for mobile devices to trigger native email apps
          window.location.href = buildMailtoUrl(email, subject, body);
        } else {
          // Use Gmail web compose for desktop
          const gmailUrl = buildGmailComposeUrl(email, subject, body);
          window.open(gmailUrl, '_blank', 'noopener');
        }
      });
    })();
  </script>
</body>
</html>

